---
import Main from "../layouts/Main.astro";
const pageTitle = "Joanna Hosking - Web Developer";
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
const allProjects = await getCollection("projects");
const allPosts = await getCollection("posts");
---

<Main pageTitle={pageTitle}>
  <section class="hero">
    <h1>üëãüèº<br />Hello, I'm Joanna.</h1>
    <p>
      I'm a web developer based in the West Midlands.<br />
      You can currently find me at <a
        href="https://cooperfields.co.uk/"
        target="_blank">Cooperfields</a
      >.
    </p>
    <p><a href="/about">Learn more &rarr;</a></p>
  </section>
  <section class="projects">
    <h2>Projects</h2>
    <ul>
      {
        allProjects.map((project) => (
          <li>
            <p>
              <figure class="icon">
                <Image src={project.data.icon} alt="" />
              </figure>{" "}
              <a href={`/projects/${project.slug}`}>{project.data.shortname}</a>
              : {project.data.description}
            </p>
          </li>
        ))
      }
    </ul>
  </section>
  <section class="blog">
    <h2>Thoughts</h2>
    <ul>
      {
        allPosts.map((post) => (
          <li>
            <a href={`/posts/${post.slug}`} class="post-link">
              <>
                <span>{post.data.title}</span>
                <span>Read &rarr;</span>
              </>
            </a>
          </li>
        ))
      }
    </ul>
  </section>
</Main>

<style>
  .projects {
    ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
    }

    li {
      margin: 0.5rem 0;
    }

    .icon {
      position: relative;
      display: inline-block;
      width: 1.35rem;
      height: 1.35rem;
      margin-right: 0.125rem;
      vertical-align: middle;

      img {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
    }
  }

  .blog {
    ul {
      list-style-type: none;
      margin: 0;
      padding: 0;
      border-top: 1px solid currentColor;
      line-height: 2;
    }

    li {
      border-bottom: 1px solid currentColor;
      
      a {
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: currentColor;
        text-decoration: none;

        span:last-child {
          font-size: 0.9rem;
          font-weight: 700;
          text-transform: uppercase;
        }
      }
    }
  }
</style>
